(this.webpackJsonpmessaging_app=this.webpackJsonpmessaging_app||[]).push([[0],{28:function(e,t,n){},33:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(1),s=n.n(r),a=n(11),i=n.n(a),o=(n(28),n(15)),u=n.n(o),j=n(17),d=n(12),p=n(16);n(30),n(44);p.a.initializeApp({apiKey:"AIzaSyAkcTZqC6x_DrRE4eE9MZH6E12EMSp59a4",authDomain:"messaging-app-39c45.firebaseapp.com",projectId:"messaging-app-39c45",storageBucket:"messaging-app-39c45.appspot.com",messagingSenderId:"317321350720",appId:"1:317321350720:web:4e4d6d96897d2a883f19a5"});var l=p.a,b=n(18),h=n(19),m=n(20),g=n.n(m),O=(n(33),l.auth()),f=l.firestore();function x(){return Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){var e=new l.auth.GoogleAuthProvider;l.auth().signInWithRedirect(e)},children:"Google login"})})}function v(){return O.currentUser&&Object(c.jsx)("button",{onClick:function(){return O.signOut()},children:"logout"})}function y(e){var t=f.collection("messages"),n=t.orderBy("createdAt").limit(25),s=Object(h.a)(n,{idField:"id"}),a=Object(d.a)(s,1)[0],i=Object(r.useState)(""),o=Object(d.a)(i,2),p=o[0],b=o[1],m=Object(r.useRef)(),x=function(){var e=Object(j.a)(u.a.mark((function e(n){var c,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=O.currentUser,r=c.uid,s=c.photoURL,e.next=4,t.add({name:O.currentUser.displayName,text:p,createdAt:l.firestore.FieldValue.serverTimestamp(),uid:r,photoURL:s});case 4:b(""),m.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsxs)("main",{children:[a&&a.map((function(e){return Object(c.jsx)(I,{message:e},e.id)})),Object(c.jsx)("div",{ref:m})]}),Object(c.jsxs)("form",{onSubmit:x,children:[Object(c.jsx)("input",{value:p,onChange:function(e){return b(e.target.value)},placeholder:"...type something"}),Object(c.jsx)("button",{type:"submit",children:Object(c.jsx)(g.a,{})})]})]})}function I(e){var t=e.message,n=t.name,r=t.text,s=t.uid===O.currentUser.uid?"sent":"received";return Object(c.jsxs)("div",{className:"message ".concat(s),children:[Object(c.jsx)("p",{className:"user-message",children:r}),Object(c.jsx)("p",{className:"username",children:n})]})}var k=function(){var e=Object(b.a)(O),t=Object(d.a)(e,1)[0];return Object(c.jsxs)("div",{className:"app",children:[Object(c.jsxs)("header",{children:[Object(c.jsx)("h1",{children:"Zim"}),Object(c.jsx)(v,{})]}),Object(c.jsx)("section",{children:t?Object(c.jsx)(y,{}):Object(c.jsx)(x,{})})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root")),w()}},[[43,1,2]]]);
//# sourceMappingURL=main.c558cad4.chunk.js.map